# Website Monitoring Bot

## üìå –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ —Å–∞–π—Ç–æ–≤ –∏ –æ—Ç–ø—Ä–∞–≤–∫–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –≤ Telegram.  
–í–∫–ª—é—á–∞–µ—Ç –≤–µ–±-–ø–∞–Ω–µ–ª—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏ –∏—Ö —Å–∞–π—Ç–æ–≤.

---

## üß± –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

–ü—Ä–æ–µ–∫—Ç —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ —Å–ª–µ–¥—É—é—â–∏—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤:

- **Telegram-–±–æ—Ç (`bot/`)** ‚Äî –∫–æ–º–∞–Ω–¥—ã –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ/—É–¥–∞–ª–µ–Ω–∏–µ —Å–∞–π—Ç–æ–≤, —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è.
- **–í–µ–±-–ø–∞–Ω–µ–ª—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ (`web/`)** ‚Äî –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ –∏ —Å–∞–π—Ç–∞–º–∏.
- **PostgreSQL** ‚Äî –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏ —Å–∞–π—Ç–æ–≤.
- **Redis** ‚Äî –±—Ä–æ–∫–µ—Ä –∑–∞–¥–∞—á Celery.
- **Celery** ‚Äî —Ñ–æ–Ω–æ–≤–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å–∞–π—Ç–æ–≤ –ø–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—é.

---

## ‚öôÔ∏è –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### –î–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (—á–µ—Ä–µ–∑ Telegram):

- ‚ûï –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Å–∞–π—Ç–æ–≤ –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
- ‚ùå –£–¥–∞–ª–µ–Ω–∏–µ —Å–∞–π—Ç–æ–≤
- üì¢ –ü–æ–ª—É—á–µ–Ω–∏–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –æ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏

### –î–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ (–≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å):

- üë§ –ü—Ä–æ—Å–º–æ—Ç—Ä –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- üåê –ü—Ä–æ—Å–º–æ—Ç—Ä —Å–∞–π—Ç–æ–≤ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- üîÑ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ —Å–∞–π—Ç–∞ –≤—Ä—É—á–Ω—É—é
- üóë –£–¥–∞–ª–µ–Ω–∏–µ —Å–∞–π—Ç–æ–≤

---

## üîÑ –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤—É–µ—Ç —Å Telegram-–±–æ—Ç–æ–º —Å –ø–æ–º–æ—â—å—é –∫–Ω–æ–ø–æ–∫:
   - `/start` ‚Äî –Ω–∞—á–∞—Ç—å —Ä–∞–±–æ—Ç—É
   - ¬´‚ûï –î–æ–±–∞–≤–∏—Ç—å —Å–∞–π—Ç¬ª ‚Äî –¥–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–π —Å–∞–π—Ç
   - ¬´üåê –ú–æ–∏ —Å–∞–π—Ç—ã¬ª ‚Äî —Å–ø–∏—Å–æ–∫ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ

2. –î–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ PostgreSQL —á–µ—Ä–µ–∑ SQLAlchemy (async).

3. –ó–∞–¥–∞—á–∞ Celery (`run_monitoring_check`) –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –∫–∞–∂–¥—ã–µ `CHECK_INTERVAL_MINUTES` –º–∏–Ω—É—Ç –∏ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –≤—Å–µ —Å–∞–π—Ç—ã.

4. –ï—Å–ª–∏ —Å–∞–π—Ç –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω ‚Äî –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –≤–ª–∞–¥–µ–ª—å—Ü—É.

5. –í–µ–±-–ø–∞–Ω–µ–ª—å (`web/`) –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç:
   - üîê –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é –ø–æ –ª–æ–≥–∏–Ω—É/–ø–∞—Ä–æ–ª—é
   - ‚úÖ JWT-–∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é
   - üìÑ –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞/—É–¥–∞–ª–µ–Ω–∏—è —Å–∞–π—Ç–æ–≤

---

## üõ†Ô∏è –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

- **Python 3.10**
- **Aiogram 3.x** ‚Äî Telegram-–±–æ—Ç
- **FastAPI** ‚Äî –≤–µ–±-–ø–∞–Ω–µ–ª—å
- **SQLAlchemy + asyncpg** ‚Äî —Ä–∞–±–æ—Ç–∞ —Å PostgreSQL
- **aiohttp** ‚Äî –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å–∞–π—Ç–æ–≤
- **Jinja2** ‚Äî —à–∞–±–ª–æ–Ω—ã
- **Celery + Redis** ‚Äî —Ñ–æ–Ω–æ–≤—ã–µ –∑–∞–¥–∞—á–∏
- **Docker / Docker Compose** ‚Äî –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è

---

## üöÄ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∏ –∑–∞–ø—É—Å–∫

### 1. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è

–°–æ–∑–¥–∞–π—Ç–µ `.env` —Ñ–∞–π–ª –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞:

```env
BOT_TOKEN=your_telegram_bot_token
DB_USER=postgres
DB_PASSWORD=mysecretpassword
DB_HOST=db
DB_PORT=5432
DB_NAME=monitoring_bot
REDIS_HOST=redis
REDIS_PORT=6379
CHECK_INTERVAL_MINUTES=5
ADMIN_USERNAME=admin
ADMIN_PASSWORD=strongpassword
JWT_SECRET_KEY=your-secure-random-key-here
LOG_LEVEL=INFO
```

### 2. –ó–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ Docker Compose

–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã:

- Docker
- Docker Compose

–ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–æ–µ–∫—Ç:

```bash
docker-compose up -d --build
```

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞:

- –ë–æ—Ç –Ω–∞—á–Ω–µ—Ç —Å–ª—É—à–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è.
- –§–æ–Ω–æ–≤–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ä—Ç—É–µ—Ç –∫–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç.
- –í–µ–±-–ø–∞–Ω–µ–ª—å –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–∞ –ø–æ –∞–¥—Ä–µ—Å—É: [http://localhost:8000/login](http://localhost:8000/login)

---

## üë• –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –î–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π:

1. –û—Ç–∫—Ä–æ–π—Ç–µ Telegram –∏ –Ω–∞—á–Ω–∏—Ç–µ —á–∞—Ç —Å –±–æ—Ç–æ–º.
2. –ù–∞–∂–º–∏—Ç–µ `/start`.
3. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –º–µ–Ω—é –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è/—É–¥–∞–ª–µ–Ω–∏—è —Å–∞–π—Ç–æ–≤.

### –î–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞:

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –ø–æ –∞–¥—Ä–µ—Å—É: [http://localhost:8000/login](http://localhost:8000/login)
2. –í–≤–µ–¥–∏—Ç–µ –ª–æ–≥–∏–Ω/–ø–∞—Ä–æ–ª—å –∏–∑ `.env`.
3. –ü—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞–π—Ç–µ –∏ —É–ø—Ä–∞–≤–ª—è–π—Ç–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ –∏ —Å–∞–π—Ç–∞–º–∏.

---

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
‚îú‚îÄ‚îÄ bot/
‚îÇ   ‚îú‚îÄ‚îÄ bot_main.py         # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞ –¥–ª—è –±–æ—Ç–∞
‚îÇ   ‚îú‚îÄ‚îÄ celery_app.py       # –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Celery
‚îÇ   ‚îú‚îÄ‚îÄ Dockerfile.bot      # Docker-—Ñ–∞–π–ª –¥–ª—è –±–æ—Ç–∞
‚îÇ   ‚îú‚îÄ‚îÄ fsm.py              # FSM –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Å–∞–π—Ç–∞
‚îÇ   ‚îú‚îÄ‚îÄ handlers.py         # –õ–æ–≥–∏–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∫–æ–º–∞–Ω–¥
‚îÇ   ‚îú‚îÄ‚îÄ keyboards.py        # Inline-–∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã
‚îÇ   ‚îú‚îÄ‚îÄ monitoring.py       # –§–æ–Ω–æ–≤–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å–∞–π—Ç–æ–≤
‚îÇ   ‚îî‚îÄ‚îÄ requirements.bot.txt
‚îú‚îÄ‚îÄ shared/
‚îÇ   ‚îú‚îÄ‚îÄ config.py           # –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ db.py               # –†–∞–±–æ—Ç–∞ —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö
‚îÇ   ‚îú‚îÄ‚îÄ logger_setup.py     # –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
‚îÇ   ‚îú‚îÄ‚îÄ models.py           # –ú–æ–¥–µ–ª–∏ SQLAlchemy
‚îÇ   ‚îî‚îÄ‚îÄ monitoring.py       # –õ–æ–≥–∏–∫–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ —Å–∞–π—Ç–æ–≤
‚îú‚îÄ‚îÄ web/
‚îÇ   ‚îú‚îÄ‚îÄ templates/          # HTML-—à–∞–±–ª–æ–Ω—ã
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ base.html
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ error.html
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ login.html
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ user_sites.html
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ users.html
‚îÇ   ‚îú‚îÄ‚îÄ auth.py             # –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ Dockerfile.web      # Docker-—Ñ–∞–π–ª –¥–ª—è –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ requirements.web.txt
‚îÇ   ‚îú‚îÄ‚îÄ routers.py          # –†–æ—É—Ç—ã –≤–µ–±-–ø–∞–Ω–µ–ª–∏
‚îÇ   ‚îî‚îÄ‚îÄ web_main.py         # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞ –¥–ª—è –≤–µ–±–∞
‚îú‚îÄ‚îÄ .gitignore
‚îî‚îÄ‚îÄ docker-compose.yml
```

---

## üîó –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏

- [Aiogram Documentation](https://docs.aiogram.dev)
- [FastAPI Documentation](https://fastapi.tiangolo.com)
- [SQLAlchemy Async Docs](https://docs.sqlalchemy.org/en/20/orm/extensions/asyncio.html)
- [Celery Documentation](https://docs.celeryq.dev)
- [Docker Compose Reference](https://docs.docker.com/compose/)

---

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

**MIT License** ‚Äî —Å–º. —Ñ–∞–π–ª [`LICENSE`](./LICENSE).

---

–ï—Å–ª–∏ –ø–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è, –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ –∏–ª–∏ –¥–æ—Ä–∞–±–æ—Ç–∫–∞ ‚Äî –¥–∞–π—Ç–µ –∑–Ω–∞—Ç—å!